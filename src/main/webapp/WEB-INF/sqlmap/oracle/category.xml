<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="category">
	<select id="list" resultType="Map" parameterType="Map" timeout="10">
		select 
			c.CATEGORY_SEQ
			, c.CATEGORY_NAME
			, sc.SUB_CATEGORY_SEQ
			, sc.SUB_CATEGORY_NAME
		FROM category c, sub_category sc
		where c.CATEGORY_SEQ = sc.CATEGORY_SEQ;
	</select>
	
	 <insert id="mergeCate" parameterType="Map">
	<!-- 	insert into CATEGORY
			(
			CATEGORY_SEQ
			,CATEGORY_NAME
			)
		values (
			#{CATEGORY_SEQ}
			,#{CATEGORY_NAME}
			) -->
		<if test="CATEGORY_SEQ != null">	
		INSERT INTO CATEGORY (
		CATEGORY_SEQ
		,CATEGORY_NAME
		)
		values(
			#{CATEGORY_SEQ}
			,#{CATEGORY_NAME}
		)
		ON DUPLICATE KEY UPDATE 
		CATEGORY_SEQ = #{CATEGORY_SEQ}
		,CATEGORY_NAME = #{CATEGORY_NAME}
		</if>
	</insert>
	
	<insert id="mergeSubCate" parameterType="Map">
		<if test="SUB_CATEGORY_SEQ != null">
			insert into SUB_CATEGORY
				(
				SUB_CATEGORY_SEQ
				,SUB_CATEGORY_NAME
				,CATEGORY_SEQ
				)
			values (
				#{SUB_CATEGORY_SEQ}
				,#{SUB_CATEGORY_NAME}
				,#{CATEGORY_SEQ}
				)
				ON DUPLICATE KEY UPDATE 
			SUB_CATEGORY_SEQ = #{CATEGORY_SEQ}
			,SUB_CATEGORY_NAME = #{CATEGORY_NAME}
			,CATEGORY_SEQ = #{CATEGORY_SEQ}
		</if>
	</insert>

	<update id="update">
		update ABILITIES
		set ABILITY_NAME = #{ABILITY_NAME}
		where ABILITY_SEQ = #{ABILITY_SEQ}
	</update>
<!-- 	
	<insert id="merge">
	INSERT INTO ABILITIES (
		ABILITY_NAME 
		,ABILITY_SEQ
		)
		values(
		#{ABILITY_NAME}
		,#{ABILITY_SEQ}
		)
		ON DUPLICATE KEY UPDATE 
		ABILITY_NAME = #{ABILITY_NAME}
		,ABILITY_SEQ = #{ABILITY_SEQ}
			
	</insert>
	
	<select id="read" resultType="Map" parameterType="Map">
		select
			ABILITY_SEQ
			,ABILITY_NAME
		from ABILITIES
		where ABILITY_SEQ = #{ABILITY_SEQ}
	</select> -->
	
	<!-- <delete id="delete" parameterType="Map">
		delete from CIP_ORGANIZATION
		where ORGANIZATION_SEQ = #{ORGANIZATION_SEQ}
	</delete> --> 
</mapper>