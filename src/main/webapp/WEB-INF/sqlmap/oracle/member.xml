<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="member">

<select id="list" resultType="Map" parameterType="Map">
<!-- select m.MEMBER_SEQ, m.NAME, m.ID, m.PASSWORD, m.TEL, m.SUB_ADDR_SEQ, ma.ABILITY_NAME
from MEMBER m, MEMBER_ABILITY_REL mr, ABILITIES ma
where mr.ABILITY_SEQ = ma.ABILITY_SEQ 
and mr.MEMBER_SEQ = m.MEMBER_SEQ
order by m.MEMBER_SEQ -->

select m.MEMBER_SEQ, m.NAME, m.ID, m.PASSWORD, m.TEL, m.SUB_ADDR_SEQ
from MEMBER m
order by m.MEMBER_SEQ
</select>

<select id="abilitylist" resultType="Map" parameterType="Map">
select ma.ABILITY_NAME
from MEMBER m, MEMBER_ABILITY_REL mr, ABILITIES ma
where mr.ABILITY_SEQ = ma.ABILITY_SEQ 
and mr.MEMBER_SEQ = m.MEMBER_SEQ
and m.MEMBER_SEQ = #{MEMBER_SEQ}
</select>


<select id="check" resultType="Map" parameterType="Map">
select ID, PASSWORD
from MEMBER 
where ID = #{id}
</select>



 <select id="subaddlist" resultType="Map" parameterType="Map">
select sub.SUB_ADDR_NAME, sub.SUB_ADDR_SEQ
from sub_address sub, address addr
where sub.ADDR_SEQ = addr.ADDR_SEQ
and addr.ADDR_SEQ=#{ADDR_SEQ}
</select> 

<select id="addlist" resultType="Map" parameterType="Map">
select *
from address
order by ADDR_SEQ
</select>

<insert id="insert">
insert into member(
MEMBER_SEQ, ID, PASSWORD, TEL, NAME, SUB_ADDR_SEQ, AUTHORITY_SEQ
)value(#{MEMBER_SEQ},#{ID},#{PASSWORD},#{TEL},#{NAME},#{cate2},'1' )

</insert>

<select id="info" resultType="Map" parameterType="Map">
select m.MEMBER_SEQ, m.NAME, m.ID, m.PASSWORD, m.TEL, sub.SUB_ADDR_NAME, addr.ADDR_NAME
from MEMBER m, address addr, sub_address sub
where m.SUB_ADDR_SEQ = sub.SUB_ADDR_SEQ  
and sub.ADDR_SEQ = addr.ADDR_SEQ
and m.MEMBER_SEQ=#{MEMBER_SEQ}
</select>

	<!-- <insert id="insert1" parameterType="Map">
		insert into MEMBER_INFO (
		SEQ_ID,ID,PASSWORD, NAME, TEL, EMAIL
		)
		values(
		#{SEQ_ID},
		#{MEMBER_ID},
		#{PASSWORD},
		#{NAME},
		#{TEL},
		#{EMAIL}
		)


	</insert>


	<select id="insert2">
		select SEQ_ID
		from MEMBER_INFO
		where SEQ_ID=#{SEQ_ID}
	</select>


	<insert id="insert3"> insert into AUTHORITY_REL(
		SEQ_ID, AUTHORITY_NUM)
		values(
		#{SEQ_ID},
		100
		)
	</insert>


	<select id="check" parameterType="Map" resultType="Map">

		select
		PASSWORD,ID,권한 from MEMBER_INFO where ID=#{MEMBER_ID}

	</select>

	<select id="getid" parameterType="Map" resultType="Map">

		select ID
		from MEMBER_INFO
		where SEQ_ID=#{SEQ_ID}

	</select>

	INSERT INTO CIP_ORGANIZATION ( ORGANIZATION_SEQ 조직 일련번호 , NAME 명칭 , 
		TELEPHONE 대표 전화번호 , ORDER_NUMBER 정렬순서 , PARENT_ORGANIZATION_SEQ 상위 조직 일련번호 
		) values( #{ORGANIZATION_SEQ} 조직 일련번호 , #{NAME} 명칭 , #{TELEPHONE} 대표 전화번호 
		, #{ORDER_NUMBER} 정렬순서 , #{PARENT_ORGANIZATION_SEQ} 상위 조직 일련번호 )

	<select id="idDoubleCheck" parameterType="Map" resultType="Map">

		select ID from MEMBER_INFO where ID=#{MEMBER_ID}

	</select>

	<delete id="delete" parameterType="Map">
		delete from CIP_MEMBER
		where
		MEMBER_SEQ = #{MEMBER_SEQ}
	</delete>


 -->

</mapper>